<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="kusto queries Related: SC200
Reference Guides:
KQL quick reference | Microsoft Learn Query best practices - Azure Data Explorer | Microsoft Learn Notes:"><title>kusto queries</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://janeilagan.github.io/digital-garden//icon.png><link href=https://janeilagan.github.io/digital-garden/styles.f865d2f61dce5aac71b72af2452ff254.min.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js></script>
<link href=https://janeilagan.github.io/digital-garden/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://janeilagan.github.io/digital-garden/js/darkmode.de86c3945c890ed4f8e2a748994c8936.min.js></script>
<script src=https://janeilagan.github.io/digital-garden/js/util.a5f5fcb11c6f6e6047bc098025d9d0c9.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://janeilagan.github.io/digital-garden/js/popover.89e34fa0219e68c0017b45cf2d1aa104.min.js></script>
<script src=https://janeilagan.github.io/digital-garden/js/code-title.bbb677b40a169d5fab9151a6637ae6cc.min.js></script>
<script src=https://janeilagan.github.io/digital-garden/js/clipboard.6f880ce73cc37eb09b24523a5454f53e.min.js></script>
<script src=https://janeilagan.github.io/digital-garden/js/callouts.e83135249ba7df7bb9912c90a91a55c6.min.js></script>
<script>const BASE_URL="https://janeilagan.github.io/digital-garden/",fetchData=Promise.all([fetch("https://janeilagan.github.io/digital-garden/indices/linkIndex.bf8617b1615077d3e9d8a2e687b4a383.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://janeilagan.github.io/digital-garden/indices/contentIndex.ce314e420b0c0ddc7d7f466365ddc426.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://janeilagan.github.io/digital-garden",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!0;drawGraph("https://janeilagan.github.io/digital-garden",t,[{"/moc":"#25d946"}],t?{centerForce:.2,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.2,linkDistance:.05,opacityScale:3,repelForce:.3,scale:.7}:{centerForce:.35,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:5,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{"â€™":"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/janeilagan.github.io\/digital-garden\/js\/router.a94e6004ff8c2a842eba009aa6632c97.min.js"
    attachSPARouting(init, render)
  </script><script>const gitalk=new Gitalk({clientID:"6a83451f6823935a7010",clientSecret:"826b6ea7347aa1d09de2e93dc4a34dbae754fa2a",repo:"digital-garden",owner:"janeilagan",admin:["janeilagan"],id:location.pathname,distractionFreeMode:!0})</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://janeilagan.github.io/digital-garden/js/full-text-search.c74218ee3bf13e2a259c960df183ed3f.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://janeilagan.github.io/digital-garden/>jane ilagan</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>kusto queries</h1><p class=meta></p><ul class=tags><li><a href=https://janeilagan.github.io/digital-garden/tags/literature/>Literature</a></li><li><a href=https://janeilagan.github.io/digital-garden/tags/published/>Published</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#variables>variables</a></li><li><a href=#search-and-where-operators>search and where operators</a></li><li><a href=#extend-operator>extend operator</a></li><li><a href=#order-by>order by</a></li><li><a href=#project-operator>project operator</a><ol><li><a href=#project>project</a></li><li><a href=#project-away>project-away</a></li><li><a href=#project-rename>project-rename</a></li><li><a href=#project-reorder>project-reorder</a></li><li><a href=#project-keep>project-keep</a></li></ol></li><li><a href=#summarize-count-and-dcount-functions>Summarize, Count and dCount Functions</a></li><li><a href=#arg_max-and-arg_min-functions>Arg_Max and Arg_Min Functions</a><ol><li><a href=#arg_max>arg_max</a></li><li><a href=#arg_min>arg_min</a></li></ol></li><li><a href=#make_list-and-make_set-functions>Make_List and Make_Set Functions</a><ol><li></li></ol></li><li><a href=#render-operator>Render Operator</a></li><li><a href=#bin-function>Bin Function</a></li><li><a href=#union-operator>Union Operator</a></li></ol></nav></details></aside><hr><a href=#kusto-queries><h1 id=kusto-queries><span class=hanchor arialabel=Anchor># </span>kusto queries</h1></a><p>Related:
<a href=/digital-garden/SC200/ rel=noopener class=internal-link data-src=/digital-garden/SC200/>SC200</a></p><p>Reference Guides:</p><ul><li><a href=https://learn.microsoft.com/en-us/azure/data-explorer/kql-quick-reference rel=noopener>KQL quick reference | Microsoft Learn</a></li><li><a href=https://learn.microsoft.com/en-us/azure/data-explorer/kusto/query/best-practices rel=noopener>Query best practices - Azure Data Explorer | Microsoft Learn</a></li></ul><p>Notes:</p><ul><li>almost like SQL</li><li>where = filters columns based on rules (like typical SQL)</li><li>pipe is used as the same like SQL or when running Powershell</li><li>Read only request</li><li>parameters are case sensitive</li></ul><p>Log Analytics Demo:
<a href=https://aka.ms/lademo rel=noopener>https://aka.ms/lademo</a></p><p><img src=https://janeilagan.github.io/digital-garden//attachments/67211f78ad31026cd8932d652a610251.png width=auto alt></p><a href=#variables><h2 id=variables><span class=hanchor arialabel=Anchor># </span>variables</h2></a><ul><li>let - declares a variable
<img src=https://janeilagan.github.io/digital-garden//attachments/f464e5e646ec8e6104c165258185867f.png width=auto alt></li></ul><a href=#search-and-where-operators><h2 id=search-and-where-operators><span class=hanchor arialabel=Anchor># </span>search and where operators</h2></a><p><img src=https://janeilagan.github.io/digital-garden//attachments/90297fb4d46f7ee85a7f4456ef05fda1.png width=auto alt></p><p><img src=https://janeilagan.github.io/digital-garden//attachments/5fdf3125a391d7d6ec666944ac2886ad.png width=auto alt></p><a href=#extend-operator><h2 id=extend-operator><span class=hanchor arialabel=Anchor># </span>extend operator</h2></a><ul><li>adding a new column that you specify and what you want to see
<img src=https://janeilagan.github.io/digital-garden//attachments/40b83cb6b69a5d5b9c867fc2b0127c7f.png width=auto alt></li></ul><a href=#order-by><h2 id=order-by><span class=hanchor arialabel=Anchor># </span>order by</h2></a><ul><li>ASC, DESC or nulls</li></ul><a href=#project-operator><h2 id=project-operator><span class=hanchor arialabel=Anchor># </span>project operator</h2></a><a href=#project><h3 id=project><span class=hanchor arialabel=Anchor># </span>project</h3></a><ul><li>like Select-Object</li><li>will only choose the columns you project</li><li><img src=https://janeilagan.github.io/digital-garden//attachments/ab764ee2be0f4426fe1e7b8395b82169.png width=auto alt></li></ul><a href=#project-away><h3 id=project-away><span class=hanchor arialabel=Anchor># </span>project-away</h3></a><ul><li>like exclusion</li></ul><a href=#project-rename><h3 id=project-rename><span class=hanchor arialabel=Anchor># </span>project-rename</h3></a><ul><li>renames the column</li></ul><a href=#project-reorder><h3 id=project-reorder><span class=hanchor arialabel=Anchor># </span>project-reorder</h3></a><ul><li>changes order/sequence of columns</li></ul><a href=#project-keep><h3 id=project-keep><span class=hanchor arialabel=Anchor># </span>project-keep</h3></a><ul><li>will only keep defined columns</li></ul><a href=#summarize-count-and-dcount-functions><h2 id=summarize-count-and-dcount-functions><span class=hanchor arialabel=Anchor># </span>Summarize, Count and dCount Functions</h2></a><ul><li><p>summarize or counts per item (kinda like group by)</p></li><li><p><img src=https://janeilagan.github.io/digital-garden//attachments/a4a5b3609c37c14bb271780496e423d3.png width=auto alt></p></li><li><p>dCount is distinctCount (kinda like group by unique values)</p></li></ul><a href=#arg_max-and-arg_min-functions><h2 id=arg_max-and-arg_min-functions><span class=hanchor arialabel=Anchor># </span>Arg_Max and Arg_Min Functions</h2></a><ul><li>used in conjunction with summarize operator</li><li>latest events and oldest events</li></ul><a href=#arg_max><h3 id=arg_max><span class=hanchor arialabel=Anchor># </span>arg_max</h3></a><p><img src=https://janeilagan.github.io/digital-garden//attachments/07a413156935565dc430265bbf477721.png width=auto alt></p><a href=#arg_min><h3 id=arg_min><span class=hanchor arialabel=Anchor># </span>arg_min</h3></a><p><img src=https://janeilagan.github.io/digital-garden//attachments/1610d3e13e321211ad6e834935ea0409.png width=auto alt></p><a href=#make_list-and-make_set-functions><h2 id=make_list-and-make_set-functions><span class=hanchor arialabel=Anchor># </span>Make_List and Make_Set Functions</h2></a><ul><li>for outputs / json format</li><li>return json arrays</li></ul><a href=#make_list><h4 id=make_list><span class=hanchor arialabel=Anchor># </span>make_list</h4></a><ul><li>return json as defined in expression</li><li>will contain duplicate accounts</li></ul><a href=#make_set><h4 id=make_set><span class=hanchor arialabel=Anchor># </span>make_set</h4></a><ul><li>results are unique accounts</li></ul><a href=#render-operator><h2 id=render-operator><span class=hanchor arialabel=Anchor># </span>Render Operator</h2></a><ul><li>generates visualization (area, bar, column, etc)
<img src=https://janeilagan.github.io/digital-garden//attachments/5df6d967f95e77664d63573e441b9934.png width=auto alt></li></ul><a href=#bin-function><h2 id=bin-function><span class=hanchor arialabel=Anchor># </span>Bin Function</h2></a><ul><li>place results in smaller brackets</li><li>like group by (but used with summarize)</li></ul><p>Difference:</p><p>not using bin:
<img src=https://janeilagan.github.io/digital-garden//attachments/261c59f0ddffb35f93000d2421945e3b.png width=auto alt></p><p>using bin:
<img src=https://janeilagan.github.io/digital-garden//attachments/7288b22af8851d257c070b1f5aa41c90.png width=auto alt></p><a href=#union-operator><h2 id=union-operator><span class=hanchor arialabel=Anchor># </span>Union Operator</h2></a><ul><li>combine data from two tables</li><li>like SQL join</li></ul><hr><div id=gitalk-container></div><script>(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("gitalk-container").innerHTML="Gitalk comments not available by default when the website is previewed locally.";return}gitalk.render("gitalk-container")})()</script></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/digital-garden/SC200/ data-ctx="kusto queries" data-src=/SC200 class=internal-link>SC-200 Microsoft Security Operations Analyst</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://janeilagan.github.io/digital-garden/js/graph.d50655ba04d739f691f0948d278689f8.js></script></div></div><div id=contact_buttons><footer><p><a href=https://janeilagan.github.io/digital-garden/about>Jane Ilagan</a> Â© 2023</p><ul><li><a href=https://janeilagan.github.io/digital-garden/>Home</a></li><li><a href=https://github.com/janeilagan>Github</a></li><li><a href=https://www.linkedin.com/in/janeilagan/>LinkedIn</a></li></ul></footer></div></div></body></html>